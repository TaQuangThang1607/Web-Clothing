{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///D:/react%2Bspring/my-app/app/components/ProductTable.tsx"],"sourcesContent":["// components/ProductTable.tsx\r\nimport Link from \"next/link\";\r\nimport { Product } from \"../types/product\";\r\n\r\ninterface Props {\r\n  products: Product[];\r\n  currentPage: number;\r\n  totalPages: number;\r\n  onPageChange: (page: number) => void;\r\n}\r\n\r\nexport default function ProductTable({ products, currentPage, totalPages, onPageChange }: Props) {\r\n  return (\r\n    <div>\r\n      <table className=\"w-full border-collapse border border-gray-300\">\r\n        <thead>\r\n          <tr className=\"bg-gray-100\">\r\n            <th className=\"border p-2\">ID</th>\r\n            <th className=\"border p-2\">Tên</th>\r\n            <th className=\"border p-2\">Giá</th>\r\n            <th className=\"border p-2\">Size</th>\r\n            <th className=\"border p-2\">Màu</th>\r\n            <th className=\"border p-2\">hanh dong</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {products.map(p => (\r\n            <tr key={p.id}>\r\n              <td className=\"border p-2\">{p.id}</td>\r\n              <td className=\"border p-2\">{p.name}</td>\r\n              <td className=\"border p-2\">{p.price}</td>\r\n              <td className=\"border p-2\">{p.size}</td>\r\n              <td className=\"border p-2\">{p.color}</td>\r\n              <td className=\"border p-2\">\r\n                    <Link href={`/admin/products/update/${p.id}`} className=\"text-blue-500 hover:underline\">\r\n                        Chỉnh sửa\r\n                    </Link>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      <div className=\"mt-4 flex justify-center space-x-2\">\r\n        <button\r\n          onClick={() => onPageChange(currentPage - 1)}\r\n          disabled={currentPage === 0}\r\n          className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\r\n        >\r\n          Trang trước\r\n        </button>\r\n        <span className=\"px-4 py-2\">\r\n          Trang {currentPage + 1} / {totalPages}\r\n        </span>\r\n        <button\r\n          onClick={() => onPageChange(currentPage + 1)}\r\n          disabled={currentPage >= totalPages - 1}\r\n          className=\"px-4 py-2 bg-gray-200 rounded disabled:opacity-50\"\r\n        >\r\n          Trang sau\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;;;;;AAC9B;;;AAUe,SAAS,aAAa,EAAE,QAAQ,EAAE,WAAW,EAAE,UAAU,EAAE,YAAY,EAAS;IAC7F,qBACE,8OAAC;;0BACC,8OAAC;gBAAM,WAAU;;kCACf,8OAAC;kCACC,cAAA,8OAAC;4BAAG,WAAU;;8CACZ,8OAAC;oCAAG,WAAU;8CAAa;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;8CAC3B,8OAAC;oCAAG,WAAU;8CAAa;;;;;;;;;;;;;;;;;kCAG/B,8OAAC;kCACE,SAAS,GAAG,CAAC,CAAA,kBACZ,8OAAC;;kDACC,8OAAC;wCAAG,WAAU;kDAAc,EAAE,EAAE;;;;;;kDAChC,8OAAC;wCAAG,WAAU;kDAAc,EAAE,IAAI;;;;;;kDAClC,8OAAC;wCAAG,WAAU;kDAAc,EAAE,KAAK;;;;;;kDACnC,8OAAC;wCAAG,WAAU;kDAAc,EAAE,IAAI;;;;;;kDAClC,8OAAC;wCAAG,WAAU;kDAAc,EAAE,KAAK;;;;;;kDACnC,8OAAC;wCAAG,WAAU;kDACR,cAAA,8OAAC,4JAAA,CAAA,UAAI;4CAAC,MAAM,CAAC,uBAAuB,EAAE,EAAE,EAAE,EAAE;4CAAE,WAAU;sDAAgC;;;;;;;;;;;;+BAPvF,EAAE,EAAE;;;;;;;;;;;;;;;;0BAenB,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,SAAS,IAAM,aAAa,cAAc;wBAC1C,UAAU,gBAAgB;wBAC1B,WAAU;kCACX;;;;;;kCAGD,8OAAC;wBAAK,WAAU;;4BAAY;4BACnB,cAAc;4BAAE;4BAAI;;;;;;;kCAE7B,8OAAC;wBACC,SAAS,IAAM,aAAa,cAAc;wBAC1C,UAAU,eAAe,aAAa;wBACtC,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT","debugId":null}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"sources":["file:///D:/react%2Bspring/my-app/app/services/productService.ts"],"sourcesContent":["import { Product } from \"../types/product\"\r\nimport { ProductDTO } from \"../types/ProductDTO\"\r\n\r\n\r\nconst API_URL = 'http://localhost:8080/admin/products'\r\n//handle get all product\r\nexport async function getAllProducts(page: number = 0, size: number = 10): Promise<{\r\n    products: Product[];\r\n    currentPage: number;\r\n    totalItems: number;\r\n    totalPages: number;\r\n}> {\r\n    const res = await fetch(`${API_URL}?page=${page}&size=${size}`, {\r\n        method: 'GET',\r\n        next: { revalidate: 0 },\r\n    });\r\n\r\n    if (!res.ok) {\r\n        throw new Error('Lỗi khi lấy danh sách sản phẩm');\r\n    }\r\n\r\n    return res.json();\r\n}\r\n\r\n//handle create product(productService.ts)\r\nexport async function createProduct(formData: FormData): Promise<Product> {\r\n    const res = await fetch(API_URL, {\r\n        method: 'POST',\r\n        body: formData,\r\n        next: { revalidate: 0 },\r\n    });\r\n\r\n    if (!res.ok) {\r\n        const errorData = await res.json();\r\n        throw new Error(errorData.message || 'Lỗi khi tạo sản phẩm');\r\n    }\r\n\r\n    return res.json();\r\n}\r\n// productService.ts\r\nexport async function getProductById(id: number): Promise<Product> {\r\n  const res = await fetch(`${API_URL}/${id}`, {\r\n    method: 'GET',\r\n    next: { revalidate: 0 },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    throw new Error(`Lỗi khi lấy thông tin sản phẩm: ${res.statusText}`);\r\n  }\r\n\r\n  return res.json();\r\n}\r\n\r\nexport async function updateProduct(id: number, formData: FormData): Promise<Product> {\r\n  const res = await fetch(`${API_URL}/${id}`, {\r\n    method: 'PATCH',\r\n    body: formData,\r\n    credentials: 'include',\r\n    next: { revalidate: 0 },\r\n  });\r\n\r\n  if (!res.ok) {\r\n    const errorData = await res.json();\r\n    if (errorData.errors) {\r\n        const errorMessages = errorData.errors.map((err: any) => `${err.field}: ${err.message}`).join(', ');\r\n        throw new Error(errorMessages);\r\n    }\r\n\r\n    throw new Error(errorData.message || 'Lỗi khi cập nhật sản phẩm');\r\n  }\r\n\r\n  return res.json();\r\n}"],"names":[],"mappings":";;;;;;AAIA,MAAM,UAAU;AAET,eAAe,eAAe,OAAe,CAAC,EAAE,OAAe,EAAE;IAMpE,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,MAAM,EAAE,KAAK,MAAM,EAAE,MAAM,EAAE;QAC5D,QAAQ;QACR,MAAM;YAAE,YAAY;QAAE;IAC1B;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACT,MAAM,IAAI,MAAM;IACpB;IAEA,OAAO,IAAI,IAAI;AACnB;AAGO,eAAe,cAAc,QAAkB;IAClD,MAAM,MAAM,MAAM,MAAM,SAAS;QAC7B,QAAQ;QACR,MAAM;QACN,MAAM;YAAE,YAAY;QAAE;IAC1B;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACT,MAAM,YAAY,MAAM,IAAI,IAAI;QAChC,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;IACzC;IAEA,OAAO,IAAI,IAAI;AACnB;AAEO,eAAe,eAAe,EAAU;IAC7C,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,CAAC,EAAE,IAAI,EAAE;QAC1C,QAAQ;QACR,MAAM;YAAE,YAAY;QAAE;IACxB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,IAAI,MAAM,CAAC,gCAAgC,EAAE,IAAI,UAAU,EAAE;IACrE;IAEA,OAAO,IAAI,IAAI;AACjB;AAEO,eAAe,cAAc,EAAU,EAAE,QAAkB;IAChE,MAAM,MAAM,MAAM,MAAM,GAAG,QAAQ,CAAC,EAAE,IAAI,EAAE;QAC1C,QAAQ;QACR,MAAM;QACN,aAAa;QACb,MAAM;YAAE,YAAY;QAAE;IACxB;IAEA,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,YAAY,MAAM,IAAI,IAAI;QAChC,IAAI,UAAU,MAAM,EAAE;YAClB,MAAM,gBAAgB,UAAU,MAAM,CAAC,GAAG,CAAC,CAAC,MAAa,GAAG,IAAI,KAAK,CAAC,EAAE,EAAE,IAAI,OAAO,EAAE,EAAE,IAAI,CAAC;YAC9F,MAAM,IAAI,MAAM;QACpB;QAEA,MAAM,IAAI,MAAM,UAAU,OAAO,IAAI;IACvC;IAEA,OAAO,IAAI,IAAI;AACjB","debugId":null}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"sources":["file:///D:/react%2Bspring/my-app/app/admin/products/page.tsx"],"sourcesContent":["// app/admin/products/page.tsx\r\n// app/admin/product/page.tsx\r\n'use client';\r\n\r\nimport ProductTable from '@/app/components/ProductTable';\r\nimport { getAllProducts } from '@/app/services/productService';\r\nimport { Product } from '@/app/types/product';\r\nimport Link from 'next/link';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { useEffect, useState } from 'react';\r\n\r\nexport default function ProductListPage() {\r\n  const router = useRouter();\r\n  const searchParams = useSearchParams();\r\n  const [products, setProducts] = useState<Product[]>([]);\r\n  const [currentPage, setCurrentPage] = useState<number>(parseInt(searchParams.get('page') || '0'));\r\n  const [totalPages, setTotalPages] = useState<number>(1);\r\n  const [isLoading, setIsLoading] = useState<boolean>(true);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      setIsLoading(true);\r\n      try {\r\n        const data = await getAllProducts(currentPage, 10);\r\n        setProducts(data.products);\r\n        setTotalPages(data.totalPages);\r\n      } catch (error) {\r\n        console.error('Lỗi khi lấy sản phẩm:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchProducts();\r\n  }, [currentPage]);\r\n\r\n  const handlePageChange = (newPage: number) => {\r\n    setCurrentPage(newPage);\r\n    router.push(`/admin/products?page=${newPage}`);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container mx-auto p-6\">\r\n      <h2 className=\"text-xl font-semibold mb-4\">Danh sách sản phẩm</h2>\r\n      <Link href=\"/admin/products/create\" className=\"inline-block mb-4 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600\">\r\n        Thêm sản phẩm mới\r\n      </Link>\r\n      {isLoading ? (\r\n        <p>Đang tải...</p>\r\n      ) : (\r\n        <ProductTable\r\n          products={products}\r\n          currentPage={currentPage}\r\n          totalPages={totalPages}\r\n          onPageChange={handlePageChange}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"AAAA,8BAA8B;AAC9B,6BAA6B;;;;;AAG7B;AACA;AAEA;AACA;AACA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,eAAe,CAAA,GAAA,kIAAA,CAAA,kBAAe,AAAD;IACnC,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAa,EAAE;IACtD,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,SAAS,aAAa,GAAG,CAAC,WAAW;IAC5F,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACrD,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAW;IAEpD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,gBAAgB;YACpB,aAAa;YACb,IAAI;gBACF,MAAM,OAAO,MAAM,CAAA,GAAA,iIAAA,CAAA,iBAAc,AAAD,EAAE,aAAa;gBAC/C,YAAY,KAAK,QAAQ;gBACzB,cAAc,KAAK,UAAU;YAC/B,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,yBAAyB;YACzC,SAAU;gBACR,aAAa;YACf;QACF;QACA;IACF,GAAG;QAAC;KAAY;IAEhB,MAAM,mBAAmB,CAAC;QACxB,eAAe;QACf,OAAO,IAAI,CAAC,CAAC,qBAAqB,EAAE,SAAS;IAC/C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA6B;;;;;;0BAC3C,8OAAC,4JAAA,CAAA,UAAI;gBAAC,MAAK;gBAAyB,WAAU;0BAAiF;;;;;;YAG9H,0BACC,8OAAC;0BAAE;;;;;qCAEH,8OAAC,kIAAA,CAAA,UAAY;gBACX,UAAU;gBACV,aAAa;gBACb,YAAY;gBACZ,cAAc;;;;;;;;;;;;AAKxB","debugId":null}}]
}